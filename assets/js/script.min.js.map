{"version":3,"sources":["script.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","testForms","_fDom2","all","forEach","form","_fValidate2","addCustomValidation","field","addEventListener","preventDefault","testGroupForms","groupErrorPlacement","@justeat/f-dom","@justeat/f-validate","2","_liteReady2","_svg4everybody2","_formValidationSetup2","./docs/formValidationSetup","@justeat/f-footer","@justeat/f-header","lite-ready","svg4everybody","3","_qwery2","b","arguments","dom","first","exists","qwery","4","panel","classList","add","5","checkForUser","setupHeader","undefined","_userAuth","convertInputToButton","selector","input","document","querySelector","replaceTag","outerHTML","replace","button","setAttribute","menuButton","navContainer","navLabel","toggle","documentElement","./userAuth","6","_userData2","removeElement","element","remove","removeHiddenClass","updateDom","authData","authEl","loginEl","isAuthenticated","headerName","headerEmail","friendlyName","textContent","email","fetch","method","credentials","then","response","json","catch","error","Promise","resolve","./userData","7","storeLocalAnalyticsBlob","result","window","localStorage","setItem","JSON","stringify","enrichUserDataWithCount","userData","orderCountResponse","orderCount","Count","pushUserData","dataLayer","push","fetchOrderCountAndSave","orderCountLink","orderCountUrl","getAttribute","err","reject","getLocalAnalyticsBlob","getItem","orderCountSupported","supportedEl","test","saveUserData","savedAnalytics","localOrderCount","parse","currentTime","Date","getTime","Expires","8","addCallBack","callBacks","callBack","TypeError","runCallbacks","callback","9","cssClasses","isHidden","formError","formErrors","hasError","hasSuccess","escapeChars","fieldValues","validationGroup","validateOnOptions","10","_classCallCheck","instance","Constructor","defaultOptions","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_typeof","Symbol","iterator","constructor","_rules2","_callbacks","_messages","_constants2","VALIDATION_KEYS","keys","errorClass","successClass","focus","enableHTML5Validation","getForm","tagName","forms","elementsUntouched","current","touchedSelectors","notInErrorState","contains","elementsNotTouched","map","childSelector","filter","el","hasAttribute","FormValidation","nameOrNode","options","this","assign","fields","getFields","customHandlers","errorMessages","onSuccess","on","onError","validateOn","setFormNoValidate","isValid","bind","callBackEvent","exception","event","currentElement","_this","formValid","errorMessage","fieldValid","fieldHasValidation","ruleName","definition","custom","condition","skipTest","childField","getMessage","setSuccess","setError","errorElement","getInlineErrorElement","hideMessage","displayInlineMessage","success","groupedErrorElement","findGroupedErrorElement","displayGroupedMessages","name","handler","Array","from","querySelectorAll","parentElement","updateElement","innerHTML","createElement","insertBefore","getGroupedErrorPosition","li","appendChild","groupElement","lastChild","firstChild","_this2","indexOf","./callbacks","./constants","./messages","./rules","11","getCustomErrorElement","errorPlacement","getDefaultMessage","nextSibling","nextElementSibling","customErrorEl","customMessage","parentNode","defaultMessageValue","defaultMessage","12","checked","13","hasCustom","14","dateToday","currentMonth","getMonth","currentYear","getFullYear","selectedMonthEl","selectedYearEl","selectedMonthVal","Number","selectedYearVal","15","../constants","16","_required2","_maxlength2","_minlength2","_pattern2","_email2","_matches2","_dateInFuture2","_conditionalRequired2","_custom2","dateInFuture","conditionalRequired","maxlength","minlength","pattern","matches","required","./conditionalRequired","./custom","./dateInFuture","./email","./matches","./maxlength","./minlength","./pattern","./required","17","matchedFieldName","18","trim","parseInt","19","20","CONSTANTS","fieldValue","RegExp","21","type","22","apply","dup","23","readyState","attachEvent","24","context","define","amd","toArray","ar","slice","isNode","nodeType","arrayLike","isFinite","flatten","concat","normalizeRoot","root","doc","opt_root","m","win","isAncestor","getElementsByClassName","match","classOnly","html","container","compareDocumentPosition","uniq","j","label","25","factory","embed","parent","svg","fragment","createDocumentFragment","viewBox","clone","cloneNode","childNodes","loadreadystatechange","xhr","onreadystatechange","cachedDocument","_cachedDocument","implementation","createHTMLDocument","body","responseText","_cachedTarget","_embeds","splice","item","id","getElementById","getSVGAncestor","node","nodeName","toLowerCase","rawopts","oninterval","index","uses","use","src","opts","attributeName","polyfill","validate","removeChild","srcSplit","split","url","shift","join","requests","XMLHttpRequest","open","send","numberOfSvgUseElementsToBypass","requestAnimationFrame","newerIEUA","webkitUA","olderEdgeUA","edgeUA","inIframe","top","self","navigator","userAgent","setTimeout","getElementsByTagName"],"mappings":"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","file":"script.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = setupValidation;\n\nvar _fDom = require('@justeat/f-dom');\n\nvar _fDom2 = _interopRequireDefault(_fDom);\n\nvar _fValidate = require('@justeat/f-validate');\n\nvar _fValidate2 = _interopRequireDefault(_fValidate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Runs f-validate on any forms in the docs\n * tagged with the `test-form` or `test-form-group` name\n */\n\nfunction setupValidation() {\n    var testForms = _fDom2.default.all('form[name=\"test-form\"');\n\n    if (testForms.length > 0) {\n        testForms.forEach(function (form) {\n            var validateForm = new _fValidate2.default(form);\n            validateForm.addCustomValidation('customRule', function (field) {\n                if (field.value === 'passTest') {\n                    return true;\n                }\n                return false;\n            });\n            form.addEventListener('submit', function (e) {\n                e.preventDefault();\n            });\n        });\n    }\n\n    var testGroupForms = _fDom2.default.all('form[name=\"test-form-group\"');\n\n    if (testGroupForms.length > 0) {\n        testGroupForms.forEach(function (form) {\n            var validateForm = new _fValidate2.default(form, { // eslint-disable-line no-unused-vars\n                groupErrorPlacement: 'bottom'\n            });\n            form.addEventListener('submit', function (e) {\n                e.preventDefault();\n            });\n        });\n    }\n}\n\n},{\"@justeat/f-dom\":3,\"@justeat/f-validate\":10}],2:[function(require,module,exports){\n'use strict';\n\nvar _liteReady = require('lite-ready');\n\nvar _liteReady2 = _interopRequireDefault(_liteReady);\n\nvar _svg4everybody = require('svg4everybody');\n\nvar _svg4everybody2 = _interopRequireDefault(_svg4everybody);\n\nrequire('@justeat/f-header');\n\nrequire('@justeat/f-footer');\n\nvar _formValidationSetup = require('./docs/formValidationSetup');\n\nvar _formValidationSetup2 = _interopRequireDefault(_formValidationSetup);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _liteReady2.default)(function () {\n    (0, _svg4everybody2.default)();\n    (0, _formValidationSetup2.default)();\n});\n\n// Fozzie imports\n// import $ from '@justeat/f-dom';\n// import '@justeat/f-toggle';\n\n},{\"./docs/formValidationSetup\":1,\"@justeat/f-footer\":4,\"@justeat/f-header\":5,\"lite-ready\":23,\"svg4everybody\":25}],3:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _qwery=require('qwery'),_qwery2=_interopRequireDefault(_qwery);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var first=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return(0,_qwery2.default)(a,b)[0]},all=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return(0,_qwery2.default)(a,b)},exists=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return 0<(0,_qwery2.default)(a,b).length},dom=all;dom.all=all,dom.first=first,dom.exists=exists,exports.default=dom;\n},{\"qwery\":24}],4:[function(require,module,exports){\n'use strict';\n\nvar _liteReady = require('lite-ready');\n\nvar _liteReady2 = _interopRequireDefault(_liteReady);\n\nvar _qwery = require('qwery');\n\nvar _qwery2 = _interopRequireDefault(_qwery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _liteReady2.default)(function () {\n\n    // Collapse the footer panels on page load\n    (0, _qwery2.default)('[data-panel-collapsible]').forEach(function (panel) {\n        panel.classList.add('is-collapsed');\n    });\n});\n},{\"lite-ready\":23,\"qwery\":24}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.checkForUser = exports.setupHeader = undefined;\n\nvar _liteReady = require('lite-ready');\n\nvar _liteReady2 = _interopRequireDefault(_liteReady);\n\nvar _userAuth = require('./userAuth');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts an input to a button in order to improve accessibility.\n *\n * @param {string} selector\n */\n/**\n * @overview Fozzie header JavaScript behaviour.\n *\n * @module f-header\n */\n\nvar convertInputToButton = function convertInputToButton(selector) {\n    var input = document.querySelector(selector);\n\n    if (input) {\n        var replaceTag = input.outerHTML.replace(/^<input/, '<button');\n        input.outerHTML = replaceTag + '</button>';\n\n        // Query the DOM again for this element now it has changed to a button\n        var button = document.querySelector(selector);\n        button.setAttribute('type', 'button');\n\n        return button;\n    }\n\n    return null;\n};\n\n/**\n * Setup the behaviour for the header component.\n */\nvar setupHeader = function setupHeader() {\n    var menuButton = convertInputToButton('[data-nav-enhance]');\n\n    if (menuButton) {\n        /**\n         * Attach click event handler — as this element is now a button this event will\n         * trigger when the `enter` and `spacebar` keys are pressed.\n         *\n         * @see {@link https://www.w3.org/TR/html51/editing.html#running-synthetic-click-activation-steps - synthetic click activation steps}\n         */\n        menuButton.addEventListener('click', function () {\n            var navContainer = document.querySelector('[data-nav-container]');\n            var navLabel = document.querySelector('[data-nav-toggle]');\n\n            if (navContainer) {\n                navContainer.classList.toggle('is-visible');\n            }\n\n            if (navLabel) {\n                navLabel.classList.toggle('is-open');\n            }\n\n            document.documentElement.classList.toggle('is-navInView');\n        });\n    }\n};\n\n(0, _liteReady2.default)(function () {\n    setupHeader();\n});\n\nexports.setupHeader = setupHeader;\nexports.checkForUser = _userAuth.checkForUser;\n},{\"./userAuth\":6,\"lite-ready\":23}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.checkForUser = undefined;\n\nvar _userData = require('./userData');\n\nvar _userData2 = _interopRequireDefault(_userData);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar removeElement = function removeElement(element) {\n    return element && element.remove();\n}; /**\n    * @overview Authorisation handler\n    *\n    * @module userAuth\n    */\n\nvar removeHiddenClass = function removeHiddenClass(element) {\n    return element && element.classList.remove('is-hidden');\n};\n\nvar updateDom = function updateDom(authData) {\n    var authEl = document.querySelector('[data-auth-wrapper]');\n    var loginEl = document.querySelector('[data-login]');\n\n    if (authData.isAuthenticated) {\n        var headerName = document.querySelector('[data-name]');\n        var headerEmail = document.querySelector('[data-email]');\n\n        if (headerName && authData.friendlyName !== '') {\n            headerName.textContent = authData.friendlyName;\n        }\n        if (headerEmail && authData.email !== '') {\n            headerEmail.textContent = authData.email;\n        }\n\n        removeHiddenClass(authEl);\n        removeElement(loginEl);\n    } else {\n        removeHiddenClass(loginEl);\n        removeElement(authEl);\n    }\n\n    return authData;\n};\n\n/**\n * Checks if authorisation details can be found in the current session hits .net\n * endpoint and is returned valid auth details or no details if not logged in\n */\nvar checkForUser = exports.checkForUser = function checkForUser() {\n    var authEl = document.querySelector('[data-auth-wrapper]');\n\n    // if our auth wrapper exists, get our user details\n    if (authEl) {\n        // this fetch logic will be extracted to a new module\n        return fetch('/api/account/details', {\n            method: 'GET',\n            credentials: 'same-origin'\n        }).then(function (response) {\n            return response.json();\n        }).then(updateDom).then(_userData2.default)\n        // should send this error to the f-logger but for now, just erroring here inline\n        .catch(function (error) {\n            void 0;\n        });\n    }\n\n    return Promise.resolve();\n};\n},{\"./userData\":7}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * @overview UserData handler\n *\n * @module userAuth/userData\n */\n\nvar storeLocalAnalyticsBlob = function storeLocalAnalyticsBlob(result) {\n    window.localStorage.setItem('je-analytics', JSON.stringify(result));\n    return result;\n};\n\nvar enrichUserDataWithCount = function enrichUserDataWithCount(userData, orderCountResponse) {\n    userData.orderCount = orderCountResponse.Count;\n    return userData;\n};\n\nvar pushUserData = function pushUserData(userData) {\n    return window.dataLayer.push({ userData: userData });\n};\n\nvar fetchOrderCountAndSave = function fetchOrderCountAndSave(userData) {\n    var orderCountLink = document.querySelector('link[rel=\"ordercountlink\"]');\n    var orderCountUrl = orderCountLink && orderCountLink.getAttribute('href');\n\n    if (orderCountUrl) {\n        return fetch(orderCountUrl, {\n            method: 'GET',\n            credentials: 'same-origin'\n        }).then(function (response) {\n            return response.json();\n        }).then(storeLocalAnalyticsBlob).then(function (result) {\n            return enrichUserDataWithCount(userData, result);\n        }).then(pushUserData).catch(function (err) {\n            void 0;\n            pushUserData(userData);\n        });\n    }\n\n    pushUserData(userData);\n    return Promise.reject();\n};\n\nvar getLocalAnalyticsBlob = function getLocalAnalyticsBlob() {\n    return window.localStorage.getItem('je-analytics');\n};\n\nvar orderCountSupported = function orderCountSupported() {\n    var supportedEl = document.querySelector('[data-order-count-supported]');\n    if (supportedEl && supportedEl.value) {\n        // Case insensitive regex test for value=\"true\"\n        return (/^true$/i.test(supportedEl.value)\n        );\n    }\n    return Promise.reject();\n};\n\nvar saveUserData = exports.saveUserData = function saveUserData(authData) {\n    if (!authData.isAuthenticated) {\n        return Promise.resolve();\n    }\n\n    var userData = authData.userData;\n\n\n    if (!orderCountSupported()) {\n        pushUserData(userData);\n        return Promise.resolve();\n    }\n\n    var savedAnalytics = getLocalAnalyticsBlob();\n    if (!savedAnalytics) {\n        return fetchOrderCountAndSave(userData);\n    }\n\n    var localOrderCount = JSON.parse(savedAnalytics);\n    var currentTime = new Date().getTime();\n    var localOrderCountExpires = Date.parse(localOrderCount.Expires);\n\n    if (localOrderCountExpires < currentTime) {\n        return fetchOrderCountAndSave(userData);\n    }\n\n    enrichUserDataWithCount(userData, localOrderCount);\n    pushUserData(userData);\n\n    return Promise.resolve();\n};\n},{}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar addCallBack = exports.addCallBack = function addCallBack(callBacks, callBack) {\n\n    if (typeof callBack !== 'function') {\n        throw new TypeError('call back is not a function');\n    }\n\n    callBacks.push(callBack);\n};\n\nvar runCallbacks = exports.runCallbacks = function runCallbacks(callBacks) {\n\n    if (!callBacks) {\n        return;\n    }\n\n    callBacks.forEach(function (callback) {\n        callback();\n    });\n};\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar cssClasses = {\n    isHidden: 'is-hidden',\n    formError: 'form-error',\n    formErrors: 'form-errors',\n    hasError: 'has-error',\n    hasSuccess: 'has-success'\n};\n\nvar validationGroup = 'data-val-group';\n\nexports.default = {\n    cssClasses: cssClasses,\n    email: /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/,\n    escapeChars: /[|\\\\{}()[\\]^$+*?.]/g,\n    fieldValues: 'input, select, textarea, [' + validationGroup + ']',\n    validationGroup: validationGroup,\n    validateOnOptions: ['blur', 'keyup']\n};\n},{}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.defaultOptions = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\n                                                                                                                                                                                                                                                                               * @module Validate\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * ## Goals\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * To validate a form based on the HTML5 attributes each form has, or the data attributes specified on them\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * Should accept either:\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * 1. A form DOM Element\n                                                                                                                                                                                                                                                                               * 2. A string relating to the name of the form\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               * Should also be able to label a form field with `data-novalidate`\n                                                                                                                                                                                                                                                                               * to remove it from those being validated\n                                                                                                                                                                                                                                                                               *\n                                                                                                                                                                                                                                                                               */\n\nvar _fDom = require('@justeat/f-dom');\n\nvar _fDom2 = _interopRequireDefault(_fDom);\n\nvar _rules = require('./rules');\n\nvar _rules2 = _interopRequireDefault(_rules);\n\nvar _callbacks = require('./callbacks');\n\nvar _messages = require('./messages');\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Load in the set of test definitions to validate against\nvar VALIDATION_KEYS = Object.keys(_rules2.default);\n\nvar defaultOptions = exports.defaultOptions = {\n    errorClass: _constants2.default.cssClasses.hasError,\n    successClass: _constants2.default.cssClasses.hasSuccess,\n    focus: false,\n    groupErrorPlacement: false,\n    enableHTML5Validation: false\n};\n\nvar getForm = function getForm(descriptor) {\n\n    if (!descriptor) {\n        throw new Error('f-validate: expected form name or form node parameter');\n    }\n\n    var form = (typeof descriptor === 'undefined' ? 'undefined' : _typeof(descriptor)) === 'object' && descriptor.tagName === 'FORM' ? descriptor : document.forms[descriptor];\n\n    if (!form) {\n        throw new Error('f-validate: form not found');\n    }\n\n    return form;\n};\n\nvar elementsUntouched = function elementsUntouched(element, current, touchedSelectors) {\n\n    var notInErrorState = !current.field.classList.contains(_constants2.default.cssClasses.hasError);\n    var elementsNotTouched = touchedSelectors.map(function (childSelector) {\n        return _fDom2.default.first(childSelector, element);\n    }).filter(function (el) {\n        return el && !el.hasAttribute('data-touched');\n    });\n\n    // If one select has not been interacted with do not run test method\n    return notInErrorState && elementsNotTouched.length > 0;\n};\n\nvar FormValidation = function () {\n    function FormValidation(nameOrNode) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, FormValidation);\n\n        this.options = Object.assign({}, defaultOptions, options);\n        this.form = getForm(nameOrNode);\n        this.fields = this.getFields();\n        this.customHandlers = {};\n        this.callBacks = {};\n        this.errorMessages = [];\n\n        if (this.options.onSuccess) {\n            this.on('success', this.options.onSuccess);\n        }\n        if (this.options.onError) {\n            this.on('error', this.options.onError);\n        }\n        if (this.options.validateOn) {\n            this.validateOn();\n        }\n\n        this.setFormNoValidate();\n        this.form.addEventListener('submit', this.isValid.bind(this));\n    }\n\n    /**\n     * on - Associates a callback with an event.\n     * Callbacks associated with an event will be called when the event fires.\n     * example:\n     *      formValidator.on('success', () => {\n     *          Do something when the form is found to be valid.\n     *      });\n     *      formValidator.on('error', () => {\n     *          Do something when the form is found to be invalid.\n     *      });\n     */\n\n\n    _createClass(FormValidation, [{\n        key: 'on',\n        value: function on(callBackEvent, callBack) {\n\n            if (!this.callBacks[callBackEvent]) {\n                this.callBacks[callBackEvent] = [];\n            }\n\n            try {\n                (0, _callbacks.addCallBack)(this.callBacks[callBackEvent], callBack, callBackEvent);\n            } catch (exception) {\n                throw new TypeError('f-validate: ' + callBackEvent + ' callback must be a function');\n            }\n        }\n    }, {\n        key: 'setSuccess',\n        value: function setSuccess(element) {\n            element.classList.remove(this.options.errorClass);\n            element.classList.add(this.options.successClass);\n        }\n    }, {\n        key: 'setError',\n        value: function setError(element) {\n            element.classList.remove(this.options.successClass);\n            element.classList.add(this.options.errorClass);\n        }\n    }, {\n        key: 'setFormNoValidate',\n        value: function setFormNoValidate() {\n\n            if (!this.options.enableHTML5Validation) {\n                this.form.setAttribute('novalidate', '');\n            }\n        }\n\n        /**\n         * Validates the form\n         *\n         * @param event\n         * @param {object} currentElement\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isValid',\n        value: function isValid(event, currentElement) {\n            var _this = this;\n\n            var formValid = true;\n            this.errorMessages = [];\n\n            this.fields.forEach(function (field) {\n\n                // currentElement refers to an element that is being validated on blur/keyup\n                // only validate on blur/keyup if the field is not empty\n                if (currentElement && (currentElement.field !== field || field.value === '')) {\n                    return;\n                }\n\n                var errorMessage = '';\n\n                // This needs to be set outside of the forEach loop, as otherwise only the final rule will apply the state\n                var fieldValid = true;\n\n                // This prevents us from applying state classes to fields without rules\n                var fieldHasValidation = false;\n\n                VALIDATION_KEYS.forEach(function (ruleName) {\n                    var definition = _rules2.default[ruleName];\n\n                    if (field.getAttribute('data-val-custom')) {\n                        _rules2.default.custom.test = _this.customHandlers[field.getAttribute('data-val-custom')];\n                    }\n\n                    if (definition.condition(field)) {\n                        fieldHasValidation = true;\n                        var skipTest = false;\n\n                        // If rule has elements that need to be checked for touch, and validation is happening on blur/keyup\n                        if (definition.touchedSelectors && currentElement) {\n                            currentElement.childField.setAttribute('data-touched', true);\n                            skipTest = elementsUntouched(field, currentElement, definition.touchedSelectors);\n                        }\n\n                        if (!skipTest && !definition.test(field, currentElement)) {\n                            fieldValid = false;\n                            errorMessage = (0, _messages.getMessage)(field, ruleName);\n                            _this.errorMessages.push(errorMessage);\n                        }\n                    }\n                });\n\n                if (fieldHasValidation) {\n\n                    if (fieldValid) {\n                        _this.setSuccess(field);\n                    } else {\n                        formValid = false;\n                        _this.setError(field);\n                    }\n\n                    // if we aren't handling a group field validation\n                    if (!_this.options.groupErrorPlacement) {\n                        var errorElement = (0, _messages.getInlineErrorElement)(field, _this.form);\n                        if (fieldValid) {\n                            (0, _messages.hideMessage)(errorElement);\n                        } else {\n                            (0, _messages.displayInlineMessage)(errorElement, errorMessage, field, _this.form);\n                        }\n                    }\n                }\n            });\n\n            if (!formValid) {\n                this.setError(this.form);\n                (0, _callbacks.runCallbacks)(this.callBacks.error);\n\n                if (event) {\n                    event.preventDefault();\n                }\n            } else {\n                this.setSuccess(this.form);\n                (0, _callbacks.runCallbacks)(this.callBacks.success);\n            }\n\n            if (this.options.groupErrorPlacement) {\n                var groupedErrorElement = this.findGroupedErrorElement();\n                if (formValid) {\n                    (0, _messages.hideMessage)(groupedErrorElement);\n                } else {\n                    this.displayGroupedMessages(groupedErrorElement);\n                }\n            }\n\n            return formValid;\n        }\n    }, {\n        key: 'addCustomValidation',\n        value: function addCustomValidation(name, handler) {\n            if (!name || typeof name !== 'string') {\n                throw new Error('f-validate: please provide the name');\n            }\n            if (!handler || typeof handler !== 'function') {\n                throw new Error('f-validate: please provide a custom method');\n            }\n\n            this.customHandlers[name] = handler;\n        }\n    }, {\n        key: 'getFields',\n        value: function getFields() {\n            return Array.from(this.form.querySelectorAll(_constants2.default.fieldValues)).filter(function (f) {\n                return !(f.hasAttribute('type') && f.getAttribute('type') === 'hidden') && !f.hasAttribute('disabled') && !f.hasAttribute('data-novalidate') && !f.parentElement.hasAttribute(_constants2.default.validationGroup);\n            });\n        }\n    }, {\n        key: 'findGroupedErrorElement',\n        value: function findGroupedErrorElement() {\n            var groupedErrorElement = this.form.querySelector('.' + _constants2.default.cssClasses.formErrors);\n\n            return groupedErrorElement !== null ? groupedErrorElement : false;\n        }\n    }, {\n        key: 'displayGroupedMessages',\n        value: function displayGroupedMessages(groupedErrorElement) {\n\n            var updateElement = groupedErrorElement;\n\n            if (!groupedErrorElement) {\n                updateElement = document.createElement('ul');\n                updateElement.classList.add(_constants2.default.cssClasses.formErrors);\n\n                this.form.insertBefore(updateElement, this.getGroupedErrorPosition());\n            } else {\n                groupedErrorElement.innerHTML = '';\n            }\n\n            this.errorMessages.forEach(function (error) {\n                var li = document.createElement('li');\n                li.textContent = error;\n                updateElement.appendChild(li);\n            });\n        }\n    }, {\n        key: 'getGroupedErrorPosition',\n        value: function getGroupedErrorPosition() {\n\n            var groupElement = this.form.querySelector(this.options.groupErrorPlacement);\n\n            if (groupElement) {\n                return groupElement;\n            }\n\n            if (this.options.groupErrorPlacement === 'bottom') {\n                return this.form.lastChild;\n            }\n\n            return this.form.firstChild;\n        }\n\n        /**\n         * Validates form field(s) based on the event passed into options.validateOn\n         *\n         * example:\n         *       this.validation = new FormValidation(this.form, {\n         *           validateOn: 'blur'\n         *       });\n         */\n\n    }, {\n        key: 'validateOn',\n        value: function validateOn() {\n            var _this2 = this;\n\n            if (this.options.groupErrorPlacement) {\n                throw new Error('f-validate: validation on \\'blur\\' or \\'keyup\\' cannot be performed if errors are grouped');\n            }\n\n            if (_constants2.default.validateOnOptions.indexOf(this.options.validateOn) === -1) {\n                throw new Error('f-validate: valid options for the \\'validateOn\\' property are \\'blur\\' or \\'keyup\\'');\n            }\n\n            this.fields.forEach(function (field) {\n                if (field.hasAttribute(_constants2.default.validationGroup)) {\n                    field.querySelectorAll(_constants2.default.fieldValues).forEach(function (childField) {\n                        return (\n\n                            // Binds each form element within a validation-group to the specified event.\n                            // When this event is triggered the validation-group element will be passed as the element to test.\n                            // The child field is also passed for use within a rule test method\n                            // Null is being passed as the isValid method expects 'field' as its second argument\n                            childField.addEventListener(_this2.options.validateOn, _this2.isValid.bind(_this2, null, {\n                                field: field,\n                                childField: childField\n                            }))\n                        );\n                    });\n                } else {\n                    // Null is being passed as the isValid method expects 'field' as its second argument\n                    field.addEventListener(_this2.options.validateOn, _this2.isValid.bind(_this2, null, { field: field }));\n                }\n            });\n        }\n    }]);\n\n    return FormValidation;\n}();\n\nexports.default = FormValidation;\n},{\"./callbacks\":8,\"./constants\":9,\"./messages\":11,\"./rules\":16,\"@justeat/f-dom\":22}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getMessage = exports.hideMessage = exports.displayInlineMessage = exports.getInlineErrorElement = undefined;\n\nvar _fDom = require('@justeat/f-dom');\n\nvar _fDom2 = _interopRequireDefault(_fDom);\n\nvar _rules = require('./rules');\n\nvar _rules2 = _interopRequireDefault(_rules);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getCustomErrorElement = function getCustomErrorElement(field, form) {\n    var errorPlacement = field.getAttribute('data-val-error-placement');\n    var errorElement = _fDom2.default.first(errorPlacement, form);\n\n    if (errorElement) {\n        return errorElement;\n    }\n\n    return false;\n};\n\nvar getInlineErrorElement = exports.getInlineErrorElement = function getInlineErrorElement(field, form) {\n    var nextSibling = field.nextElementSibling;\n    var customErrorEl = getCustomErrorElement(field, form);\n\n    if (customErrorEl && customErrorEl.nextElementSibling && customErrorEl.nextElementSibling.classList.contains(_constants2.default.cssClasses.formError)) {\n        return customErrorEl.nextElementSibling;\n    }\n\n    if (nextSibling && nextSibling.classList.contains(_constants2.default.cssClasses.formError)) {\n\n        return nextSibling;\n    }\n\n    return false;\n};\n\nvar displayInlineMessage = exports.displayInlineMessage = function displayInlineMessage(errorElement, customMessage, field, form) {\n\n    var updateElement = errorElement;\n    var customErrorEl = getCustomErrorElement(field, form) || field;\n\n    if (!errorElement) {\n        updateElement = document.createElement('p');\n        updateElement.classList.add(_constants2.default.cssClasses.formError);\n        field.parentNode.insertBefore(updateElement, customErrorEl.nextSibling);\n    }\n\n    updateElement.textContent = customMessage;\n    updateElement.classList.remove(_constants2.default.cssClasses.isHidden);\n};\n\nvar hideMessage = exports.hideMessage = function hideMessage(errorElement) {\n    if (!errorElement) {\n        return;\n    }\n\n    errorElement.classList.add(_constants2.default.cssClasses.isHidden);\n    errorElement.innerHTML = '';\n};\n\nvar getDefaultMessage = function getDefaultMessage(field, ruleName) {\n\n    if (!_rules2.default[ruleName].defaultMessageValue) {\n        return _rules2.default[ruleName].defaultMessage;\n    }\n\n    return _rules2.default[ruleName].defaultMessage.replace('{0}', _rules2.default[ruleName].defaultMessageValue(field));\n};\n\nvar getMessage = exports.getMessage = function getMessage(field, ruleName) {\n    return field.getAttribute('data-val-' + ruleName + '-error') || getDefaultMessage(field, ruleName);\n};\n},{\"./constants\":9,\"./rules\":16,\"@justeat/f-dom\":22}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Conditional Required Rule\n * -------------------------\n * This validation rule checks that if a specified checkbox is not checked, then it is required that a value must be entered in the field with this validation check.\n *\n * This also means that if the specified checkbox is checked, then the field is not required and the form will return valid when the field is empty.\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('data-val-conditionalRequired');\n    },\n\n    test: function test(field) {\n        var input = document.querySelector('[name=\\'' + field.getAttribute('data-val-conditionalRequired') + '\\']');\n        var isChecked = input ? input.checked : true;\n\n        return isChecked || field.value.length > 0;\n    },\n\n    defaultMessage: 'This field is required.'\n};\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Custom Rule\n * --------------\n * This validation rule allows the addition of a custom validation check to be added to the field.\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        var hasCustom = field.hasAttribute('data-val-custom');\n        var hasCustomError = field.hasAttribute('data-val-custom-error');\n\n        if (hasCustomError && !hasCustom) {\n            throw new Error('f-validate: specify data-val-custom along with data-val-custom-error attribute');\n        }\n\n        return hasCustom;\n    },\n\n    test: null,\n\n    defaultMessage: 'Custom validation failed.'\n};\n},{}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _fDom = require('@justeat/f-dom');\n\nvar _fDom2 = _interopRequireDefault(_fDom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('data-val-dateInFuture');\n    },\n\n    test: function test(element) {\n\n        var dateToday = new Date();\n        var currentMonth = dateToday.getMonth() + 1;\n        var currentYear = dateToday.getFullYear();\n\n        var selectedMonthEl = _fDom2.default.first('[data-val-dateInFuture-type=\"month\"]', element);\n        var selectedYearEl = _fDom2.default.first('[data-val-dateInFuture-type=\"year\"]', element);\n        var selectedMonthVal = Number(selectedMonthEl.value);\n        var selectedYearVal = Number(selectedYearEl.value);\n\n        if (selectedYearVal > currentYear && selectedMonthVal > 0) {\n            return true;\n        }\n\n        return selectedYearVal === currentYear && selectedMonthVal >= currentMonth;\n    },\n\n    touchedSelectors: ['[data-val-dateInFuture-type=\"month\"]', '[data-val-dateInFuture-type=\"year\"]'],\n\n    defaultMessage: 'This date must be in the future.'\n}; /**\n    * Date In Future Rule\n    * -------------------\n    * This rule is for validating dates entered by a collection of `select` fields.\n    * When applied to a validation group, it returns true if the date entered in these fields is in the future.\n    *\n    */\n},{\"@justeat/f-dom\":22}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _constants = require('../constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    condition: function condition(field) {\n        return field.getAttribute('type') === 'email';\n    },\n\n    test: function test(field) {\n        // if the field is empty, should validate as true\n        if (field.value === '') {\n            return true;\n        }\n        return _constants2.default.email.test(field.value);\n    },\n\n    defaultMessage: 'This field must contain a valid email address.'\n}; /**\n    * Email Rule\n    * --------------\n    * Checks for a valid email address\n    *\n    */\n},{\"../constants\":9}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _required = require('./required');\n\nvar _required2 = _interopRequireDefault(_required);\n\nvar _maxlength = require('./maxlength');\n\nvar _maxlength2 = _interopRequireDefault(_maxlength);\n\nvar _minlength = require('./minlength');\n\nvar _minlength2 = _interopRequireDefault(_minlength);\n\nvar _pattern = require('./pattern');\n\nvar _pattern2 = _interopRequireDefault(_pattern);\n\nvar _email = require('./email');\n\nvar _email2 = _interopRequireDefault(_email);\n\nvar _matches = require('./matches');\n\nvar _matches2 = _interopRequireDefault(_matches);\n\nvar _dateInFuture = require('./dateInFuture');\n\nvar _dateInFuture2 = _interopRequireDefault(_dateInFuture);\n\nvar _conditionalRequired = require('./conditionalRequired');\n\nvar _conditionalRequired2 = _interopRequireDefault(_conditionalRequired);\n\nvar _custom = require('./custom');\n\nvar _custom2 = _interopRequireDefault(_custom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    custom: _custom2.default,\n    dateInFuture: _dateInFuture2.default,\n    conditionalRequired: _conditionalRequired2.default,\n    maxlength: _maxlength2.default,\n    minlength: _minlength2.default,\n    pattern: _pattern2.default,\n    email: _email2.default,\n    matches: _matches2.default,\n    required: _required2.default\n};\n},{\"./conditionalRequired\":12,\"./custom\":13,\"./dateInFuture\":14,\"./email\":15,\"./matches\":17,\"./maxlength\":18,\"./minlength\":19,\"./pattern\":20,\"./required\":21}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Matches Rule\n * ------------\n * Checks that the value of the field being validated matches the value of a separate specified field\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('data-val-equalto');\n    },\n\n    test: function test(field) {\n        var matchedFieldName = field.getAttribute('data-val-equalto');\n\n        if (matchedFieldName) {\n            var input = document.querySelector('input[name=' + matchedFieldName + ']');\n\n            return matchedFieldName && input && field.value === input.value;\n        }\n\n        return false;\n    },\n\n    defaultMessage: 'This field does not match the {0} field.',\n\n    defaultMessageValue: function defaultMessageValue(field) {\n        return field.getAttribute('data-val-equalto').replace('*.', '');\n    }\n};\n},{}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Maxlength Rule\n * --------------\n * Checks that the value of the field is not greater than the specified maximum length.\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('maxlength') || field.hasAttribute('data-val-maxlength');\n    },\n\n    test: function test(field) {\n        // if the field is empty, or attribute is set with no value, should validate as true\n        if (field.value === '' || field.getAttribute('maxlength') === '' || field.getAttribute('data-val-maxlength') === '') {\n            return true;\n        }\n        return field.value.trim().length <= parseInt(field.getAttribute('maxlength') || field.getAttribute('data-val-maxlength'), 10);\n    },\n\n    defaultMessage: 'This field must not exceed {0} characters in length.',\n\n    defaultMessageValue: function defaultMessageValue(field) {\n        return parseInt(field.getAttribute('maxlength') || field.getAttribute('data-val-maxlength'), 10);\n    }\n};\n},{}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Minlength Rule\n * --------------\n * Checks that the value of the field is of a specified minimum length.\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('minlength') || field.hasAttribute('data-val-minlength');\n    },\n\n    test: function test(field) {\n        // if the field is empty, or attribute is set with no value, should validate as true\n        if (field.value === '' || field.getAttribute('minlength') === '' || field.getAttribute('data-val-minlength') === '') {\n            return true;\n        }\n\n        return field.value.trim().length >= parseInt(field.getAttribute('minlength') || field.getAttribute('data-val-minlength'), 10);\n    },\n\n    defaultMessage: 'This field must be at least {0} characters in length.',\n\n    defaultMessageValue: function defaultMessageValue(field) {\n        return parseInt(field.getAttribute('minlength') || field.getAttribute('data-val-minlength'), 10);\n    }\n};\n},{}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Pattern Rule\n * --------------\n * Allows definition of a rule to validate the input value using Regular Expressions (RegEx)\n *\n */\nvar CONSTANTS = require('../constants');\n\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('pattern') || field.hasAttribute('data-val-regex');\n    },\n\n    test: function test(field) {\n        // if the field is empty, should validate as true\n        if (field.value === '') {\n            return true;\n        }\n        // escape characters that have special meaning inside a regular expression in field value\n        var fieldValue = field.value.replace(CONSTANTS.escapeChars, '\\\\$&');\n        var pattern = field.getAttribute('pattern') || field.getAttribute('data-val-regex');\n\n        return RegExp('^(?:' + pattern + ')$', 'gim').test(fieldValue);\n    },\n\n    defaultMessage: 'This field contains a value that isn’t accepted.'\n};\n},{\"../constants\":9}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Required Rule\n * -------------\n * Checks that a value is present for the field being validated\n *\n */\nexports.default = {\n    condition: function condition(field) {\n        return field.hasAttribute('required') || field.hasAttribute('data-val-required');\n    },\n\n    test: function test(field) {\n        // Required checkbox & radio, 1 should be checked.\n        if (field.type === 'radio') {\n            var radioInputs = document.querySelectorAll('[name=\\'' + field.name + '\\']:checked');\n            return radioInputs.length > 0;\n        }\n\n        if (field.type === 'checkbox') {\n            return field.checked === true;\n        }\n\n        return field.value.trim().length > 0;\n    },\n\n    defaultMessage: 'This field is required.'\n};\n},{}],22:[function(require,module,exports){\narguments[4][3][0].apply(exports,arguments)\n},{\"dup\":3,\"qwery\":24}],23:[function(require,module,exports){\nmodule.exports = function (callback) {\r\n\r\n\tif (document.readyState === 'complete' || document.readyState === 'interactive') {\r\n\t\t// Already ready or interactive, execute callback\r\n\t\tcallback.call();\r\n\t}\r\n\telse if (document.attachEvent) {\r\n\t\t// Old browsers\r\n\t\tdocument.attachEvent('onreadystatechange', function () {\r\n\t\t\tif (document.readyState === 'interactive')\r\n\t\t\t\tcallback.call();\r\n\t\t});\r\n\t}\r\n\telse if (document.addEventListener) {\r\n\t\t// Modern browsers\r\n\t\tdocument.addEventListener('DOMContentLoaded', callback);\r\n\t}\r\n}\r\n\n},{}],24:[function(require,module,exports){\n/*!\n  * @preserve Qwery - A selector engine\n  * https://github.com/ded/qwery\n  * (c) Dustin Diaz 2014 | License MIT\n  */\n\n(function (name, context, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else context[name] = definition()\n})('qwery', this, function () {\n\n  var classOnly = /^\\.([\\w\\-]+)$/\n    , doc = document\n    , win = window\n    , html = doc.documentElement\n    , nodeType = 'nodeType'\n  var isAncestor = 'compareDocumentPosition' in html ?\n    function (element, container) {\n      return (container.compareDocumentPosition(element) & 16) == 16\n    } :\n    function (element, container) {\n      container = container == doc || container == window ? html : container\n      return container !== element && container.contains(element)\n    }\n\n  function toArray(ar) {\n    return [].slice.call(ar, 0)\n  }\n\n  function isNode(el) {\n    var t\n    return el && typeof el === 'object' && (t = el.nodeType) && (t == 1 || t == 9)\n  }\n\n  function arrayLike(o) {\n    return (typeof o === 'object' && isFinite(o.length))\n  }\n\n  function flatten(ar) {\n    for (var r = [], i = 0, l = ar.length; i < l; ++i) arrayLike(ar[i]) ? (r = r.concat(ar[i])) : (r[r.length] = ar[i])\n    return r\n  }\n\n  function uniq(ar) {\n    var a = [], i, j\n    label:\n    for (i = 0; i < ar.length; i++) {\n      for (j = 0; j < a.length; j++) {\n        if (a[j] == ar[i]) {\n          continue label\n        }\n      }\n      a[a.length] = ar[i]\n    }\n    return a\n  }\n\n\n  function normalizeRoot(root) {\n    if (!root) return doc\n    if (typeof root == 'string') return qwery(root)[0]\n    if (!root[nodeType] && arrayLike(root)) return root[0]\n    return root\n  }\n\n  /**\n   * @param {string|Array.<Element>|Element|Node} selector\n   * @param {string|Array.<Element>|Element|Node=} opt_root\n   * @return {Array.<Element>}\n   */\n  function qwery(selector, opt_root) {\n    var m, root = normalizeRoot(opt_root)\n    if (!root || !selector) return []\n    if (selector === win || isNode(selector)) {\n      return !opt_root || (selector !== win && isNode(root) && isAncestor(selector, root)) ? [selector] : []\n    }\n    if (selector && arrayLike(selector)) return flatten(selector)\n\n\n    if (doc.getElementsByClassName && selector == 'string' && (m = selector.match(classOnly))) {\n      return toArray((root).getElementsByClassName(m[1]))\n    }\n    // using duck typing for 'a' window or 'a' document (not 'the' window || document)\n    if (selector && (selector.document || (selector.nodeType && selector.nodeType == 9))) {\n      return !opt_root ? [selector] : []\n    }\n    return toArray((root).querySelectorAll(selector))\n  }\n\n  qwery.uniq = uniq\n\n  return qwery\n}, this);\n\n},{}],25:[function(require,module,exports){\n!function(root, factory) {\n    \"function\" == typeof define && define.amd ? // AMD. Register as an anonymous module unless amdModuleId is set\n    define([], function() {\n        return root.svg4everybody = factory();\n    }) : \"object\" == typeof module && module.exports ? // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory() : root.svg4everybody = factory();\n}(this, function() {\n    /*! svg4everybody v2.1.9 | github.com/jonathantneal/svg4everybody */\n    function embed(parent, svg, target) {\n        // if the target exists\n        if (target) {\n            // create a document fragment to hold the contents of the target\n            var fragment = document.createDocumentFragment(), viewBox = !svg.hasAttribute(\"viewBox\") && target.getAttribute(\"viewBox\");\n            // conditionally set the viewBox on the svg\n            viewBox && svg.setAttribute(\"viewBox\", viewBox);\n            // copy the contents of the clone into the fragment\n            for (// clone the target\n            var clone = target.cloneNode(!0); clone.childNodes.length; ) {\n                fragment.appendChild(clone.firstChild);\n            }\n            // append the fragment into the svg\n            parent.appendChild(fragment);\n        }\n    }\n    function loadreadystatechange(xhr) {\n        // listen to changes in the request\n        xhr.onreadystatechange = function() {\n            // if the request is ready\n            if (4 === xhr.readyState) {\n                // get the cached html document\n                var cachedDocument = xhr._cachedDocument;\n                // ensure the cached html document based on the xhr response\n                cachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(\"\"), \n                cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each item\n                xhr._embeds.splice(0).map(function(item) {\n                    // get the cached target\n                    var target = xhr._cachedTarget[item.id];\n                    // ensure the cached target\n                    target || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)), \n                    // embed the target into the svg\n                    embed(item.parent, item.svg, target);\n                });\n            }\n        }, // test the ready state change immediately\n        xhr.onreadystatechange();\n    }\n    function svg4everybody(rawopts) {\n        function oninterval() {\n            // while the index exists in the live <use> collection\n            for (// get the cached <use> index\n            var index = 0; index < uses.length; ) {\n                // get the current <use>\n                var use = uses[index], parent = use.parentNode, svg = getSVGAncestor(parent), src = use.getAttribute(\"xlink:href\") || use.getAttribute(\"href\");\n                if (!src && opts.attributeName && (src = use.getAttribute(opts.attributeName)), \n                svg && src) {\n                    if (polyfill) {\n                        if (!opts.validate || opts.validate(src, svg, use)) {\n                            // remove the <use> element\n                            parent.removeChild(use);\n                            // parse the src and get the url and id\n                            var srcSplit = src.split(\"#\"), url = srcSplit.shift(), id = srcSplit.join(\"#\");\n                            // if the link is external\n                            if (url.length) {\n                                // get the cached xhr request\n                                var xhr = requests[url];\n                                // ensure the xhr request exists\n                                xhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open(\"GET\", url), xhr.send(), \n                                xhr._embeds = []), // add the svg and id as an item to the xhr embeds list\n                                xhr._embeds.push({\n                                    parent: parent,\n                                    svg: svg,\n                                    id: id\n                                }), // prepare the xhr ready state change event\n                                loadreadystatechange(xhr);\n                            } else {\n                                // embed the local id into the svg\n                                embed(parent, svg, document.getElementById(id));\n                            }\n                        } else {\n                            // increase the index when the previous value was not \"valid\"\n                            ++index, ++numberOfSvgUseElementsToBypass;\n                        }\n                    }\n                } else {\n                    // increase the index when the previous value was not \"valid\"\n                    ++index;\n                }\n            }\n            // continue the interval\n            (!uses.length || uses.length - numberOfSvgUseElementsToBypass > 0) && requestAnimationFrame(oninterval, 67);\n        }\n        var polyfill, opts = Object(rawopts), newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/, webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/, olderEdgeUA = /\\bEdge\\/12\\.(\\d+)\\b/, edgeUA = /\\bEdge\\/.(\\d+)\\b/, inIframe = window.top !== window.self;\n        polyfill = \"polyfill\" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || (navigator.userAgent.match(olderEdgeUA) || [])[1] < 10547 || (navigator.userAgent.match(webkitUA) || [])[1] < 537 || edgeUA.test(navigator.userAgent) && inIframe;\n        // create xhr requests object\n        var requests = {}, requestAnimationFrame = window.requestAnimationFrame || setTimeout, uses = document.getElementsByTagName(\"use\"), numberOfSvgUseElementsToBypass = 0;\n        // conditionally start the interval if the polyfill is active\n        polyfill && oninterval();\n    }\n    function getSVGAncestor(node) {\n        for (var svg = node; \"svg\" !== svg.nodeName.toLowerCase() && (svg = svg.parentNode); ) {}\n        return svg;\n    }\n    return svg4everybody;\n});\n},{}]},{},[2])\n//# sourceMappingURL=script.js.map\n"]}